(this.webpackJsonpcad=this.webpackJsonpcad||[]).push([[0],{434:function(e,t,n){e.exports=n(673)},668:function(e,t){},671:function(e,t,n){},673:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(53),i=n.n(o),l=n(25),c=n(92),s=n(386),u=n(22),d="GET_ERRORS",p="CLEAR_ERRORS",m="SET_LOADER",h="CLEAR_LOADER",f=n(35);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={id:0,username:"",session:{}};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={participants:[],timeslots:{},code:"",endtime:"",location:"",starttime:"",title:"",votingend:"",votingtime:0,duration:0,hostId:0,id:0,weekends:!1,winner:""};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={users:[],messages:[]},C=[];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={},_=Object(c.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":f.a.success("Signed in successfully",{className:"ui success message"});var n=t.payload.token;return localStorage.setItem("jwt",n),y({},e);case"SIGN_UP":return f.a.success("Signed up successfully",{className:"ui success message"}),y({},e);case"GET_SESSION":case"JOIN_SESSION":case"HOST_SESSION":return y({},e,{session:t.payload});case"AUTH":var a=t.payload,r=a.username,o=a.id;return y({},e,{username:r,id:o});case"CLEAR_USER":return b;default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"JOIN_SESSION":var n=t.payload;return O({},e,{},n);case"HOST_SESSION":var a=t.payload;return O({},e,{},a);case"GET_SESSION":var r=t.payload;return O({},e,{},r);case"CLEAR_SESSION":return v;case"SET_TIMER":var o=t.payload;return O({},e,{timer:o});case"DECREMENT_TIMER":var i=t.payload;return e.timer<=0?(Object(f.a)("Voting is over"),clearInterval(i),O({},e,{timer:null})):O({},e,{timer:e.timer-1});case"SET_TIMESLOTS":var l=t.payload;return O({},e,{timeslots:l});case"ADD_VOTE":var c=t.payload,s=c.timeslot,u=c.username,d=e.timeslots;return d[s]?d[s].push(u):d[s]=[u],O({},e,{timeslots:d});case"LEAVE_SESSION":var p=t.payload.id;return O({},e,{participants:e.participants.filter((function(e){return e!==p}))});case"SET_WINNER":var m=t.payload.winner;return O({},e,{winner:m,timer:0});default:return e}},websocket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":var n=t.payload;return j({},e,{messages:e.messages.concat(n)});case"ENTER_ROOM":var a=t.payload,r=a.id,o=a.username;return Object(f.a)("".concat(o," has joined the room")),j({},e,{users:e.users.concat({id:r,username:o})});case"LEAVE_ROOM":var i=t.payload,l=i.id,c=i.username;return Object(f.a)("".concat(c," has left the room")),j({},e,{users:e.users.filter((function(e){return e.id!==l}))});default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_EVENT":var n=t.payload;return e.concat(n);case"GET_EVENTS":var a=t.payload.events;return a;case"POST_EVENT":f.a.success("Event created",{className:"ui success message"});var r=t.payload;return e.concat(r);case"PUT_EVENT":f.a.success("Event updated",{className:"ui success message"});var o=t.payload;return e.filter((function(e){return e.id!==o.id})).concat(o);case"DELETE_EVENT":f.a.success("Event deleted",{className:"ui error message"});var i=t.payload.id;return e.filter((function(e){return e.id!==Number(i)}));case"GET_SESSION_EVENTS":var l=t.payload;return l.events;case"CLEAR_USER":return C;default:return e}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var n=t.payload,a=N({},e);return a[n]=!0,a;case h:return{};default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:if(!t.payload)return{connection:"ERR_CONNECTION_REFUSED"};var n=t.payload,a=n.data,r=n.data.errors;return D({},r?r:a);case p:return{};default:return e}}}),A=Object(c.e)(_,Object(c.d)(Object(c.a)(s.a))),R=n(44),x=n(93),M=n(29),L=n(30),V=n(31),U=n(32),G=n(20),H=n(33),J=n(115),z=n(407),B=n(674),F=n(718),W=n(388),K=n(717),Y=n(49),q=n(387),Q="https://socket-dot-cadcw2-teamg.appspot.com",X=n.n(q).a.create({baseURL:"https://api-dot-cadcw2-teamg.appspot.com"});var Z=function(){return function(e){return X.defaults.headers.common.authorization=localStorage.getItem("jwt"),e({type:m,payload:"AUTH"}),X.get("/auth/authenticate").then((function(t){return e({type:"AUTH",payload:t.data})})).then(e({type:p})).catch((function(t){return e({type:d,payload:t.response})})).finally((function(){return e({type:h,payload:"AUTH"})}))}},$={background:"rgba(0,0,0,.05"};var ee=Object(l.b)((function(e){return{username:e.user.username}}),{signOut:function(){return function(e){localStorage.removeItem("jwt"),f.a.success("Signed out successfully",{className:"ui success message"}),e({type:"CLEAR_USER"}),e({type:"CLEAR_SESSION"}),e({type:"CLEAR_USER"}),e({type:h}),e({type:p})}}})((function(e){var t=localStorage.getItem("jwt"),n=Object(x.g)(),a=r.a.createElement(W.a.Menu,{position:"right"},r.a.createElement(K.a,{as:"p",content:e.username,color:"blue",className:"username",style:{margin:"auto 1rem"}}),r.a.createElement(R.b,{to:"/home",activeStyle:$},r.a.createElement(W.a.Item,null,r.a.createElement(Y.a,{name:"home"}),"Home")),r.a.createElement(R.b,{to:"/schedule",activeStyle:$},r.a.createElement(W.a.Item,null,r.a.createElement(Y.a,{name:"calendar"}),"Schedule")),r.a.createElement(W.a.Item,{onClick:function(){e.signOut(),n.push("/sign-in")}},r.a.createElement(Y.a,{name:"sign out",size:"large",link:!0}),"Sign Out")),o=r.a.createElement(W.a.Menu,{position:"right"},r.a.createElement(R.b,{to:"/sign-up",activeStyle:$},r.a.createElement(W.a.Item,null,r.a.createElement(Y.a,{name:"signup"}),"Sign Up")),r.a.createElement(R.b,{to:"/sign-in",activeStyle:$},r.a.createElement(W.a.Item,null,r.a.createElement(Y.a,{name:"sign-in"}),"Sign In")));return r.a.createElement(W.a,{icon:"labeled",className:"navbar",style:{margin:"0px"}},r.a.createElement("div",{style:{margin:"auto 1rem"}},r.a.createElement(R.b,{to:"/home"},r.a.createElement(K.a,{as:"h1",content:"Rendezvous",color:"blue"}))),null!==t?a:o)})),te=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={token:localStorage.getItem("jwt"),redirect:r.a.createElement(r.a.Fragment,null)},n.handleNotFound=n.handleNotFound.bind(Object(G.a)(n)),n.handleNotLoggedIn=n.handleNotLoggedIn.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.unlisten=this.props.history.listen(this.props.clearErrors),!this.state.token&&this.props.protected&&this.setState({redirect:this.handleNotLoggedIn()})}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.error;t&&this.setState({redirect:this.handleNotFound(t)})}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"handleNotFound",value:function(e){return f.a.error(e,{className:"ui error message"}),r.a.createElement(x.a,{to:{pathname:"/home"}})}},{key:"handleNotLoggedIn",value:function(){return f.a.error("You must be logged in",{className:"ui error message"}),r.a.createElement(x.a,{to:{pathname:"/sign-in"}})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.loader;return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(ee,null),r.a.createElement("div",{style:{height:"90%",marginLeft:"10%",marginRight:"10%"}},r.a.createElement(B.a,{inverted:!0,active:n},r.a.createElement(F.a,{inverted:!0,size:"huge",inline:"centered"})),r.a.createElement("br",null),t,this.state.redirect))}}]),t}(a.Component),ne=Object(l.b)(null,{clearErrors:function(){return function(e){e({type:p})}}})(Object(x.h)(te)),ae=n(34),re=n.n(ae),oe=n(40),ie=n(676),le=n(719);function ce(e){var t=e.data;return r.a.createElement(r.a.Fragment,null,Object.keys(t).length>0?r.a.createElement(le.a,{error:!0,header:"Error",list:Object.values(t).map((function(e){return r.a.createElement("li",{key:e},e)}))}):r.a.createElement(r.a.Fragment,null))}var se=function(e){var t=(e=e.split(" "))[0].split("-"),n=e[1],a=t[0],r=t[1],o=t[2];return new Date("".concat(o,"-").concat(r,"-").concat(a,"T").concat(n,":00"))},ue=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={code:""},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleJoin=n.handleJoin.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleJoin",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.joinSession({code:this.state.code});case 2:t=e.sent,(n=t.payload.id)&&this.props.history.push("/rooms/".concat(n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.code,t=this.props,n=t.loader,a=t.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{fluid:!0,name:"code",iconPosition:"left",icon:"hashtag",placeholder:"Enter code",type:"text",onChange:this.handleChange,value:e,error:Boolean(a.code)}),r.a.createElement("br",null),r.a.createElement(J.a,{onClick:this.handleJoin,fluid:!0,loading:n.JOIN_SESSION,color:"blue"},"Join"),r.a.createElement(ce,{data:a}))}}]),t}(r.a.Component);var de=Object(l.b)((function(e){return{loader:e.loader,errors:e.errors}}),{joinSession:function(e){return function(t){var n=function(e){var t={};return 0===e.code.length&&(t.code="Code cannot be empty"),{errors:t,validated:0===Object.values(t).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"JOIN_SESSION"}),X.post("/session/join",e).then((function(e){return t({type:"JOIN_SESSION",payload:e.data})})).then(t({type:p})).then(Object(f.a)("Room joined")).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"JOIN_SESSION"})}))):t({type:d,payload:{data:r}})}}})((function(e){var t=Object(x.g)();return r.a.createElement(ue,Object.assign({},e,{history:t}))})),pe=n(291),me=n(116);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={title:"",location:"",starttime:"",endtime:"",votingtime:"",duration:"",weekends:!1},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleHost=n.handleHost.bind(Object(G.a)(n)),n.handleTimeChange=n.handleTimeChange.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleTimeChange",value:function(e,t){var n=t.name,a=t.value;this.setState(Object(u.a)({},n,a))}},{key:"handleHost",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.hostSession(fe({},this.state));case 2:t=e.sent,(n=t.payload.id)&&this.props.history.push("/rooms/".concat(n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.title,a=t.location,o=t.starttime,i=t.endtime,l=t.duration,c=t.votingtime,s=t.weekends,u=this.props,d=u.loader,p=u.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{name:"title",iconPosition:"left",icon:"calendar outline",placeholder:"Enter title",type:"text",fluid:!0,onChange:this.handleChange,value:n,error:Boolean(p.title)}),r.a.createElement("br",null),r.a.createElement(ie.a,{name:"location",iconPosition:"left",icon:"building",placeholder:"Enter location",type:"text",fluid:!0,onChange:this.handleChange,value:a,error:Boolean(p.location)}),r.a.createElement("br",null),r.a.createElement(me.DateTimeInput,{fluid:!0,closable:!0,autoComplete:"off",hideMobileKeyboard:!0,name:"starttime",iconPosition:"left",placeholder:"Enter earliest start time",popupPosition:"bottom center",type:"text",onChange:this.handleTimeChange,value:o,error:Boolean(p.starttime)}),r.a.createElement("br",null),r.a.createElement(me.DateTimeInput,{fluid:!0,closable:!0,autoComplete:"off",hideMobileKeyboard:!0,name:"endtime",iconPosition:"left",placeholder:"Enter lastest finish time",popupPosition:"bottom center",type:"text",onChange:this.handleTimeChange,value:i,error:Boolean(p.endtime)}),r.a.createElement("br",null),r.a.createElement(ie.a,{name:"duration",iconPosition:"left",icon:"hourglass outline",placeholder:"Enter meeting duration",label:{basic:!0,content:"mins"},labelPosition:"right",type:"number",fluid:!0,onChange:this.handleChange,value:l,error:Boolean(p.duration)}),r.a.createElement("br",null),r.a.createElement(ie.a,{name:"votingtime",iconPosition:"left",icon:"hourglass outline",placeholder:"Enter voting duration",label:{basic:!0,content:"secs"},labelPosition:"right",type:"number",fluid:!0,onChange:this.handleChange,value:c,error:Boolean(p.votingtime)}),r.a.createElement("br",null),r.a.createElement(pe.a,{label:"Include weekends",onChange:function(){return e.setState({weekends:!s})},checked:s}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(J.a,{onClick:this.handleHost,loading:d.HOST_SESSION,fluid:!0,color:"blue"},"Host"),r.a.createElement(ce,{data:p}))}}]),t}(r.a.Component);var ye=Object(l.b)((function(e){return{loader:e.loader,errors:e.errors}}),{hostSession:function(e){return function(t){e.starttime=se(e.starttime),e.endtime=se(e.endtime);var n=function(e){var t=e.title,n=e.location,a=e.starttime,r=e.endtime,o=e.votingtime,i=e.weekends,l={};return 0===t.length&&(l.title="Title cannot be empty"),0===n.length&&(l.location="Location cannot be empty"),0===a.length&&(l.starttime="Start time password cannot be empty"),0===r.length&&(l.endtime="End time cannot be empty"),0===o.length&&(l.votingtime="Voting time cannot be empty"),Date.parse(a)>Date.parse(r)&&(l.endtime="End cannot occur before start"),"boolean"!==typeof i&&(l.weekends="Weekends must be a boolean"),{errors:l,validated:0===Object.values(l).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"HOST_SESSION"}),X.post("/session/host",e).then((function(e){return t({type:"HOST_SESSION",payload:e.data})})).then(t({type:p})).then(Object(f.a)("Room created")).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"HOST_SESSION"})}))):t({type:d,payload:{data:r}})}}})((function(e){var t=Object(x.g)();return r.a.createElement(Ee,Object.assign({},e,{history:t}))})),be=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={join:!1,host:!1},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleReset=n.handleReset.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.props.user.id||this.props.authenticate()}},{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleReset",value:function(){this.setState({join:!1,host:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.join,a=t.host,o=this.props.loader,i=r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a.Group,{size:"massive",fluid:!0,color:"blue"},r.a.createElement(J.a,{onClick:function(){return e.setState({host:!0})}},"Host"),r.a.createElement(J.a.Or,{text:"OR"}),r.a.createElement(J.a,{onClick:function(){return e.setState({join:!0})}},"Join"))),l=n||a?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(J.a,{fluid:!0,onClick:this.handleReset},"Back")):null,c=i;return n&&(c=r.a.createElement(de,null)),a&&(c=r.a.createElement(ye,null)),r.a.createElement(ne,{protected:!0,loader:o.AUTH},r.a.createElement(z.a,{centered:!0,verticalAlign:"middle",columns:2,relaxed:"very",stackable:!0,style:{height:"80%"}},r.a.createElement(z.a.Column,null,c,l)))}}]),t}(r.a.Component),ge=Object(l.b)((function(e){return{user:e.user,loader:e.loader}}),{authenticate:Z})(be),Oe=n(287),ve=n(722),Se=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={username:"",password:"",password2:""},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n,a,r,o;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.username,a=t.password,r=t.password2,e.next=3,this.props.signUp({username:n,password:a,password2:r});case 3:o=e.sent,o.payload.username&&this.props.history.push("/sign-in");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.password2,o=this.props,i=o.loader,l=o.errors;return r.a.createElement(ne,null,r.a.createElement(z.a,{centered:!0,verticalAlign:"middle",columns:2,relaxed:"very",stackable:!0,style:{marginTop:"7%"}},r.a.createElement(z.a.Column,null,r.a.createElement(K.a,{as:"h1",textAlign:"center"},"Register an Account"),r.a.createElement(Oe.a,{textAlign:"center"},r.a.createElement(ve.a,null,r.a.createElement(ve.a.Input,{name:"username",icon:"user",fluid:!0,iconPosition:"left",placeholder:"Username",onChange:this.handleChange,value:t,error:Boolean(l.username)}),r.a.createElement(ve.a.Input,{name:"password",icon:"lock",fluid:!0,iconPosition:"left",placeholder:"Password",type:"password",onChange:this.handleChange,value:n,error:Boolean(l.password)}),r.a.createElement(ve.a.Input,{name:"password2",icon:"lock",fluid:!0,iconPosition:"left",placeholder:"Repeat Password",type:"password",onChange:this.handleChange,value:a}),r.a.createElement(J.a,{primary:!0,fluid:!0,loading:i.SIGN_UP,onClick:this.handleSubmit},"Sign Up")),r.a.createElement(ce,{data:l})),r.a.createElement(le.a,{warning:!0},r.a.createElement(Y.a,{name:"help"}),"Already registered?\xa0",r.a.createElement("a",{href:"/sign-in"},"Login here"),"\xa0"))))}}]),t}(r.a.Component);var je=Object(l.b)((function(e){return{loader:e.loader,errors:e.errors}}),{signUp:function(e){return function(t){var n=function(e){var t=e.username,n=e.password,a=e.password2,r={};return 0===t.length&&(r.username="Username cannot be empty"),0===n.length&&(r.password="Password cannot be empty"),0===a.length&&(r.password2="Repeated password cannot be empty"),{errors:r,validated:0===Object.values(r).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"SIGN_UP"}),X.post("/auth/register",e).then((function(e){return t({type:"SIGN_UP",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"SIGN_UP"})}))):t({type:d,payload:{data:r}})}}})((function(e){var t=Object(x.g)();return r.a.createElement(Se,Object.assign({},e,{history:t}))})),we=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={username:"",password:""},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n,a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.username,a=t.password,e.next=3,this.props.signIn({username:n,password:a});case 3:if(r=e.sent,!r.payload.token){e.next=7;break}return e.abrupt("return",this.props.history.push("/home"));case 7:return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=this.props,o=a.loader,i=a.errors;return r.a.createElement(ne,null,r.a.createElement(z.a,{centered:!0,verticalAlign:"middle",columns:2,relaxed:"very",stackable:!0,style:{marginTop:"7%"}},r.a.createElement(z.a.Column,null,r.a.createElement(K.a,{as:"h1",textAlign:"center"},"Login to Account"),r.a.createElement(Oe.a,{textAlign:"center"},r.a.createElement(ve.a,null,r.a.createElement(ve.a.Input,{name:"username",icon:"user",fluid:!0,iconPosition:"left",placeholder:"Username",type:"text",onChange:this.handleChange,value:t,error:Boolean(i.username)}),r.a.createElement(ve.a.Input,{name:"password",icon:"lock",fluid:!0,iconPosition:"left",placeholder:"Password",type:"password",onChange:this.handleChange,value:n,error:Boolean(i.password)}),r.a.createElement(J.a,{primary:!0,fluid:!0,onClick:this.handleSubmit,loading:o.SIGN_IN},"Sign In")),r.a.createElement(ce,{data:i})),r.a.createElement(le.a,{warning:!0},r.a.createElement(Y.a,{name:"help"}),"Not yet signed up?\xa0",r.a.createElement("a",{href:"/sign-up"},"Register here"),"\xa0"))))}}]),t}(r.a.Component);var Ce=Object(l.b)((function(e){return{user:e.user,loader:e.loader,errors:e.errors}}),{signIn:function(e){return function(t){var n=function(e){var t=e.username,n=e.password,a={};return 0===t.length&&(a.username="Username cannot be empty"),0===n.length&&(a.password="Password cannot be empty"),{errors:a,validated:0===Object.values(a).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"SIGN_IN"}),X.post("/auth/login",e).then((function(e){return t({type:"SIGN_IN",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"SIGN_IN"})}))):t({type:d,payload:{data:r}})}}})((function(e){var t=Object(x.g)();return r.a.createElement(we,Object.assign({},e,{history:t}))}));var ke=function(){var e=Object(x.g)();return localStorage.getItem("jwt")&&e.push("/home"),e.push("/sign-in"),r.a.createElement(ne,null,r.a.createElement(K.a,{as:"h1",textAlign:"center"},"Welcome to Rendezvous"))},Ne=n(727),Ie=n(415),Te=n(135),De=n(416),Pe=n(417);var _e=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={title:"",location:"",endtime:""},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleSave=n.handleSave.bind(Object(G.a)(n)),n.handleTimeChange=n.handleTimeChange.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleTimeChange",value:function(e,t){var n=t.name,a=t.value;this.setState(Object(u.a)({},n,a))}},{key:"handleSave",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n,a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date(this.props.date),n=this.state.endtime?new Date("".concat(new Date(this.props.date).toDateString()," ").concat(this.state.endtime)):"",a={title:this.state.title,location:this.state.location,starttime:t,endtime:n},e.next=5,this.props.postEvent(a);case 5:r=e.sent,r.payload.id&&this.props.closeModal();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.title,n=e.location,a=e.endtime,o=this.props,i=o.date,l=o.loader;return r.a.createElement(ve.a,null,r.a.createElement(K.a,{block:!0,textAlign:"center"},"Create Event on ",new Date(i).toUTCString()),r.a.createElement(ve.a.Input,{fluid:!0,name:"title",iconPosition:"left",icon:"calendar outline",placeholder:"Enter title",type:"text",onChange:this.handleChange,value:t}),r.a.createElement("br",null),r.a.createElement(ve.a.Input,{fluid:!0,name:"location",iconPosition:"left",icon:"building outline",placeholder:"Enter location",type:"text",onChange:this.handleChange,value:n}),r.a.createElement("br",null),r.a.createElement(me.TimeInput,{fluid:!0,closable:!0,autoComplete:"off",hideMobileKeyboard:!0,name:"endtime",iconPosition:"left",placeholder:"Enter end time",type:"text",onChange:this.handleTimeChange,value:a}),r.a.createElement("br",null),r.a.createElement(J.a,{onClick:this.handleSave,fluid:!0,loading:l.POST_EVENT},"Save"))}}]),t}(r.a.Component),Ae=Object(l.b)((function(e){return{loader:e.loader}}),{postEvent:function(e){return function(t){var n=function(e){var t=e.title,n=e.location,a=e.starttime,r=e.endtime,o={};return 0===t.length&&(o.title="Title cannot be empty"),0===n.length&&(o.location="Location cannot be empty"),0===a.length&&(o.starttime="Start time cannot be empty"),0===r.length&&(o.endtime="End time cannot be empty"),Date.parse(a)>Date.parse(r)&&(o.endtime="End cannot occur before start"),{errors:o,validated:0===Object.values(o).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"POST_EVENT"}),X.post("/events/",e).then((function(e){return t({type:"POST_EVENT",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"POST_EVENT"})}))):t({type:d,payload:{data:r}})}}})(_e);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={title:"",location:"",endtime:""},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleTimeChange=n.handleTimeChange.bind(Object(G.a)(n)),n.handleUpdate=n.handleUpdate.bind(Object(G.a)(n)),n.handleDelete=n.handleDelete.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleTimeChange",value:function(e,t){var n=t.name,a=t.value;this.setState(Object(u.a)({},n,a))}},{key:"handleUpdate",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n,a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.endtime?new Date("".concat(new Date(this.props.event.extendedProps.endtime).toDateString()," ").concat(this.state.endtime)):"",n=xe({},this.state,{starttime:this.props.event.start,endtime:t}),e.next=4,this.props.updateEvent(n,this.props.event.id);case 4:a=e.sent,r=a.payload,r.id&&this.props.closeModal();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.deleteEvent(this.props.event.id);case 2:t=e.sent,t.payload.id&&this.props.closeModal();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.title,n=e.location,a=e.endtime,o=this.props,i=o.event,l=o.loader;return r.a.createElement(ve.a,null,r.a.createElement(K.a,{textAlign:"center"},"Update Event"),r.a.createElement(ve.a.Input,{fluid:!0,name:"title",iconPosition:"left",icon:"calendar outline",placeholder:i.title,type:"text",onChange:this.handleChange,value:t}),r.a.createElement(ve.a.Input,{fluid:!0,name:"location",iconPosition:"left",icon:"building outline",placeholder:i.extendedProps.location,type:"text",onChange:this.handleChange,value:n}),r.a.createElement(me.TimeInput,{fluid:!0,closable:!0,autoComplete:"off",hideMobileKeyboard:!0,name:"endtime",iconPosition:"left",placeholder:new Date(i.extendedProps.endtime).toUTCString(),type:"text",onChange:this.handleTimeChange,value:a}),r.a.createElement(J.a,{primary:!0,onClick:this.handleUpdate,fluid:!0,loading:l.PUT_EVENT},"Save"),r.a.createElement("br",null),r.a.createElement(J.a,{onClick:this.handleDelete,fluid:!0,color:"red",loading:l.DELETE_EVENT},"Delete"))}}]),t}(r.a.Component),Le=Object(l.b)((function(e){return{loader:e.loader}}),{updateEvent:function(e,t){return function(n){var a=function(e){var t=e.title,n=e.location,a=e.starttime,r=e.endtime,o={};return t||n||r||(o.title="You have to update atleast one property"),Date.parse(a)>Date.parse(r)&&(o.endtime="End cannot occur before start"),{errors:o,validated:0===Object.values(o).length}}(e),r=a.validated,o=a.errors;return r?(n({type:m,payload:"PUT_EVENT"}),X.put("/events/".concat(t),e).then((function(e){return n({type:"PUT_EVENT",payload:e.data})})).then(n({type:p})).catch((function(e){return n({type:d,payload:e.response})})).finally((function(){return n({type:h,payload:"PUT_EVENT"})}))):n({type:d,payload:{data:o}})}},deleteEvent:function(e){return function(t){return t({type:m,payload:"DELETE_EVENT"}),X.delete("/events/".concat(e)).then((function(e){return t({type:"DELETE_EVENT",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"DELETE_EVENT"})}))}}})(Me);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ue=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={modalNew:!1,modalEdit:!1,selectedDate:null,selectedEvent:null},n.handleDateClick=n.handleDateClick.bind(Object(G.a)(n)),n.handleEventClick=n.handleEventClick.bind(Object(G.a)(n)),n.handleCloseModal=n.handleCloseModal.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.props.getEvents()}},{key:"handleDateClick",value:function(e){this.setState({modalNew:!0,selectedDate:e.dateStr})}},{key:"handleEventClick",value:function(e){this.setState({modalEdit:!0,selectedEvent:e.event})}},{key:"handleCloseModal",value:function(){this.setState({modalNew:!1,modalEdit:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.modalNew,a=t.modalEdit,o=t.selectedDate,i=t.selectedEvent,l=this.props.errors,c=this.props.events.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{start:e.starttime,end:e.endtime})}));return r.a.createElement("div",{style:{height:"90%"}},r.a.createElement(Ie.a,{defaultView:"timeGridWeek",events:c,plugins:[Te.d,Pe.a,De.a],dateClick:this.handleDateClick,eventClick:this.handleEventClick,height:"parent"}),r.a.createElement(Ne.a,{open:n,onClose:function(){return e.setState({modalNew:!1})},size:"small"},r.a.createElement(Ne.a.Content,null,r.a.createElement(Ae,{date:o,closeModal:this.handleCloseModal}),r.a.createElement(ce,{data:l}))),r.a.createElement(Ne.a,{open:a,onClose:function(){return e.setState({modalEdit:!1})},size:"small"},r.a.createElement(Ne.a.Content,null,r.a.createElement(Le,{event:i,closeModal:this.handleCloseModal}),r.a.createElement(ce,{data:l}))))}}]),t}(a.Component),Ge=Object(l.b)((function(e){return{events:e.events,errors:e.errors}}),{getEvents:function(){return function(e){return e({type:m,payload:"GET_EVENTS"}),X.get("/events/").then((function(t){return e({type:"GET_EVENTS",payload:t.data})})).then(e({type:p})).catch((function(t){return e({type:d,payload:t.response})})).finally((function(){return e({type:h,payload:"GET_EVENTS"})}))}}})(Ue),He=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={},n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.props.user.id||this.props.authenticate()}},{key:"render",value:function(){var e=this.props.loader;return r.a.createElement(ne,{protected:!0,loader:e.GET_EVENTS},r.a.createElement(Ge,null))}}]),t}(a.Component),Je=Object(l.b)((function(e){return{user:e.user,loader:e.loader}}),{authenticate:Z})(He),ze=n(418),Be=n.n(ze),Fe=n(91),We=function(e,t){return function(n){e.emit("close",t),n({type:"CLEAR_SESSION"})}},Ke=n(724),Ye=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={message:""},n.handleChange=n.handleChange.bind(Object(G.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){this.props.ioMsg(this.props.socket,this.state.message),this.setState({message:""})}},{key:"render",value:function(){var e=this.state.message,t=this.props.websocket;return r.a.createElement(Ke.a.Group,null,r.a.createElement(K.a,{as:"h3",textAlign:"center",dividing:!0},"Chat"),t.messages.map((function(e,t){return r.a.createElement(Ke.a,{key:t},r.a.createElement(Ke.a.Avatar,{src:"https://react.semantic-ui.com/images/avatar/small/matt.jpg"}),r.a.createElement(Ke.a.Content,null,r.a.createElement(Ke.a.Author,{as:"span"},e.username),r.a.createElement(Ke.a.Metadata,null,e.time),r.a.createElement(Ke.a.Text,null,e.message)))})),r.a.createElement(ve.a,{reply:!0},r.a.createElement(ve.a.Input,{name:"message",icon:"envelope",iconPosition:"left",placeholder:"Enter message",type:"text",fluid:!0,onChange:this.handleChange,value:e}),r.a.createElement(J.a,{primary:!0,onClick:this.handleSubmit,fluid:!0},"Send")))}}]),t}(a.Component),qe=Object(l.b)((function(e){return{websocket:e.websocket}}),{ioMsg:function(e,t){return function(n){t&&(e.emit("message",t),n({type:m,payload:"ADD_MESSAGE"}))}}})(Ye),Qe=n(723);var Xe=Object(l.b)((function(e){return{session:e.session,loader:e.loader}}),{ioStart:function(e,t){return function(n){n({type:m,payload:"START_SESSION"}),e.emit("start",t)}},ioClose:We,closeSession:function(e){return function(t){return t({type:m,payload:"CLEAR_SESSION"}),X.delete("/session/".concat(e)).then((function(e){return t({type:"CLEAR_SESSION",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"CLEAR_SESSION"})}))}}})((function(e){var t=Object(x.g)();function n(){return(n=Object(oe.a)(re.a.mark((function t(){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.ioStart(e.socket,e.session.id);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(oe.a)(re.a.mark((function n(){var a;return re.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.closeSession(e.session.id);case 2:a=n.sent,a.payload.id&&(e.ioClose(e.socket,e.session.id),t.push("/home"));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{onClick:function(){return n.apply(this,arguments)},fluid:!0,primary:!0,loading:e.loader.START_SESSION},"Start"),r.a.createElement("br",null),r.a.createElement(J.a,{onClick:function(){return a.apply(this,arguments)},fluid:!0,loading:e.loader.CLEAR_SESSION},"Close"))}));var Ze=Object(l.b)((function(e){return{user:e.user,session:e.session,loader:e.loader}}),{leaveSession:function(e){return function(t){return t({type:m,payload:"LEAVE_SESSION"}),X.put("/session/".concat(e)).then((function(e){return t({type:"LEAVE_SESSION",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"LEAVE_SESSION"})}))}}})((function(e){var t=Object(x.g)();function n(){return(n=Object(oe.a)(re.a.mark((function n(){return re.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.leaveSession(e.session.id,e.user.id);case 2:t.push("/home");case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{onClick:function(){return n.apply(this,arguments)},fluid:!0,loading:e.loader.LEAVE_SESSION},"Leave"))})),$e=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={},n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.session,a=this.props.session,o=a.title,i=a.location,l=a.starttime,c=a.endtime,s=a.duration,u=a.votingtime,d=a.participants,p=a.weekends,m=a.timer,h=a.hostUsername,f=a.code,E=a.winner;return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{as:"h3",textAlign:"center",dividing:!0},"Meeting Details"),r.a.createElement(Qe.a,{divided:!0,relaxed:!0},r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"calendar alternate outline",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,o),r.a.createElement(Qe.a.Description,null,"Title"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"building outline",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,i),r.a.createElement(Qe.a.Description,null,"Location"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"user secret",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,h),r.a.createElement(Qe.a.Description,null,"Host"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"hourglass start",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,new Date(l).toLocaleString("en-GB")),r.a.createElement(Qe.a.Description,null,"Start"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"hourglass end",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,new Date(c).toLocaleString("en-GB")),r.a.createElement(Qe.a.Description,null,"End"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"clock outline",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,s,"min"),r.a.createElement(Qe.a.Description,null,"Duration"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{className:m?"red":"",name:"time",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,E?0:m||u,"s"),r.a.createElement(Qe.a.Description,null,"Time to vote"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"user outline",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,"undefined"!==typeof d?d.length:""),r.a.createElement(Qe.a.Description,null,"Participants"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"calendar check outline",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,p?"Yes":"No"),r.a.createElement(Qe.a.Description,null,"Incude weekends"))),r.a.createElement(Qe.a.Item,null,r.a.createElement(Qe.a.Icon,{name:"hashtag",size:"large",verticalAlign:"middle"}),r.a.createElement(Qe.a.Content,null,r.a.createElement(Qe.a.Header,null,f),r.a.createElement(Qe.a.Description,null,"Code")))),t.id===n.hostId?r.a.createElement(Xe,{socket:this.props.socket}):r.a.createElement(Ze,{socket:this.props.socket}))}}]),t}(a.Component),et=Object(l.b)((function(e){return{user:e.user,session:e.session}}))($e),tt=n(419),nt=n(420),at=n(224),rt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ot=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(V.a)(this,Object(U.a)(t).call(this,e))).state={},n.handleClick=n.handleClick.bind(Object(G.a)(n)),n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"handleClick",value:function(e){this.props.ioVote(this.props.socket,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.session,o=a.winner?new Map([[rt[new Date(a.winner).getDay()],[a.winner]]]):Object.keys(a.timeslots).reduce((function(e,t){return e.set(rt[new Date(t).getDay()],(e.get(rt[new Date(t).getDay()])||[]).concat(t))}),new Map);return r.a.createElement(z.a,{columns:o.size||7,stackable:!0},Object(nt.a)(o.entries()).map((function(t){var o=Object(tt.a)(t,2),i=o[0],l=o[1];return r.a.createElement(z.a.Column,{key:l},r.a.createElement(K.a,{as:"h3",textAlign:"center",dividing:!0},i),l.map((function(t){var o=a.timeslots[t].length,i=a.timeslots[t].includes(n.username),l=t===a.winner,c=l?"green":i?"blue":null;return r.a.createElement(at.a,{color:c,key:t,id:t,fluid:!0,centered:!0,onClick:function(){return e.handleClick(t)}},r.a.createElement(at.a.Content,null,r.a.createElement(at.a.Meta,{textAlign:"center"},new Date(t).toLocaleString("en-GB")),r.a.createElement(at.a.Description,{textAlign:"center"},l?"Winner":"Votes ".concat(o))))})))})))}}]),t}(a.Component),it=Object(l.b)((function(e){return{user:e.user,session:e.session}}),{ioVote:function(e,t){return function(n){e.emit("vote",t)}}})(ot),lt=function(e){function t(e){var n;Object(M.a)(this,t),n=Object(V.a)(this,Object(U.a)(t).call(this,e));var a=Be()(Q);return a.on("message",(function(e){return n.props.ioOnMsg(e)})),a.on("join",(function(t){return n.props.ioOnJoin(t,e)})),a.on("leave",(function(t){return n.props.ioOnLeave(t,e)})),a.on("start",(function(e){return n.props.ioOnStart(e)})),a.on("vote",(function(e){return n.props.ioOnVote(e)})),a.on("error",(function(e){return n.props.ioOnError(e)})),a.on("result",(function(e){return n.props.ioOnResult(e)})),a.on("close",(function(){return n.props.ioOnClose(e)})),n.state={socket:a},n}return Object(H.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n,a,r,o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.socket,this.props.user.id){e.next=4;break}return e.next=4,this.props.authenticate();case 4:if(t.emit("join",this.props.match.params.id,this.props.user.username,this.props.user.id),this.props.session.id){e.next=16;break}return e.next=8,this.props.getSession(this.props.match.params.id);case 8:if(n=e.sent,a=n.payload,r=a.votingend,o=a.timeslots,400!==(i=a.status)&&404!==i){e.next=15;break}return e.abrupt("return");case 15:r&&o&&this.props.ioOnStart({votingend:r,timeslots:o});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.state.socket.close()}},{key:"render",value:function(){var e=this.state.socket,t=this.props,n=t.session,a=t.errors,o=t.loader,i=t.match;return r.a.createElement(ne,{protected:!0,error:a.id||a.connection,loader:o.AUTH||o.GET_SESSION},r.a.createElement(z.a,{columns:2,stackable:!0},r.a.createElement(z.a.Column,{width:4},r.a.createElement(et,{socket:e})),r.a.createElement(Fe.a,{width:12},n.timer||n.winner?r.a.createElement(it,{room:i.params.id,socket:e}):r.a.createElement(qe,{room:i.params.id,socket:e}))))}}]),t}(a.Component);var ct=Object(l.b)((function(e){return{user:e.user,session:e.session,websocket:e.websocket,loader:e.loader,errors:e.errors}}),{authenticate:Z,getSession:function(e){return function(t){return t({type:m,payload:"GET_SESSION"}),X.get("/session/".concat(e)).then((function(e){return t({type:"GET_SESSION",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"GET_SESSION"})}))}},getSessionEvents:function(e){return function(t){return t({type:m,payload:"GET_SESSION_EVENTS"}),X.get("/session/".concat(e,"/events")).then((function(e){return t({type:"GET_SESSION_EVENTS",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"GET_SESSION_EVENTS"})}))}},ioOnMsg:function(e){return function(t){t({type:"ADD_MESSAGE",payload:JSON.parse(e)}),t({type:h,payload:"ADD_MESSAGE"})}},ioOnJoin:function(e,t){return function(n){var a=JSON.parse(e);n({type:"ENTER_ROOM",payload:{id:a.id,username:a.username,props:t}}),t.getSession(t.match.params.id)}},ioOnLeave:function(e,t){return function(n){var a=JSON.parse(e),r=a.id,o=a.username;r&&(n({type:"LEAVE_ROOM",payload:{id:r,username:o}}),t.getSession(t.match.params.id))}},ioOnResult:function(e){return function(t){f.a.success("".concat(e," has won"),{className:"ui success message"}),t({type:"SET_WINNER",payload:{winner:e}})}},ioClose:We,ioOnStart:function(e){return function(t){var n=e,a=n.votingend,r=n.timeslots;a?(a=new Date(a)).setHours(a.getHours()):(e=JSON.parse(e),a=new Date(e.votingend),r=e.timeslots);var o=new Date;if(!(a<o)){t({type:"SET_TIMESLOTS",payload:r}),t({type:h});var i=Math.ceil(Math.abs((o.getTime()-a.getTime())/1e3));Object(f.a)("Voting has started, you have ".concat(i," seconds to vote")),t({type:"SET_TIMER",payload:i});var l=setInterval((function(){return t({type:"DECREMENT_TIMER",payload:l})}),1e3)}}},ioOnVote:function(e){return function(t){var n=JSON.parse(e),a=n.timeslot,r=n.username;t({type:"ADD_VOTE",payload:{timeslot:a,username:r}}),Object(f.a)("".concat(r," has just voted ").concat(new Date(a).toLocaleString("en-GB")))}},ioOnError:function(e){return function(t){f.a.error(e,{className:"ui error message"}),t({type:d,payload:{data:{socket:e}}}),t({type:h,payload:"START_SESSION"})}},ioOnClose:function(e){return function(t){f.a.error("Room was closed by the host",{className:"ui error message"}),e.history.push("/home"),t({type:"CLEAR_SESSION"})}}})((function(e){var t=Object(x.g)();return r.a.createElement(lt,Object.assign({history:t},e))}));n(671),n(672);var st=document.getElementById("root");i.a.render(r.a.createElement(l.a,{store:A},r.a.createElement((function(){return X.defaults.headers.common.authorization=localStorage.getItem("jwt"),f.a.configure({position:"bottom-center",toastClassName:"ui info message",hideProgressBar:!0,draggable:!1,newestOnTop:!0,autoClose:5e3}),r.a.createElement(R.a,null,r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/rooms/:id",component:ct}),r.a.createElement(x.b,{path:"/schedule",component:Je}),r.a.createElement(x.b,{path:"/sign-up",component:je}),r.a.createElement(x.b,{path:"/sign-in",component:Ce}),r.a.createElement(x.b,{path:"/home",component:ge}),r.a.createElement(x.b,{path:"/",component:ke})))}),null)),st)}},[[434,1,2]]]);
//# sourceMappingURL=main.ef6c275d.chunk.js.map