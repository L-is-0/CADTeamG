(this.webpackJsonpcad=this.webpackJsonpcad||[]).push([[0],{427:function(e,t,n){e.exports=n(666)},661:function(e,t){},664:function(e,t,n){},666:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(53),i=n.n(o),l=n(32),c=n(92),s=n(384),u=n(22),d="GET_ERRORS",p="CLEAR_ERRORS",m="SET_LOADER",h="CLEAR_LOADER",f=n(36);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={id:0,username:"",session:{}};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O={messages:[],timeslots:[],participants:[],votes:{},code:"",endtime:"",location:"",starttime:"",title:"",votingend:"",votingtime:0,duration:0,hostId:0,id:0,weekends:!1},j=[];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={},N=Object(c.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":f.a.success("Signed in successfully",{className:"ui success message"});var n=t.payload.token;return localStorage.setItem("jwt",n),b({},e);case"SIGN_UP":return f.a.success("Signed up successfully",{className:"ui success message"}),b({},e);case"GET_SESSION":case"JOIN_SESSION":case"HOST_SESSION":return b({},e,{session:t.payload});case"AUTH":var a=t.payload,r=a.username,o=a.id;return b({},e,{username:r,id:o});case"CLEAR_USER":return y;default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"JOIN_SESSION":var n=t.payload;return v({},e,{},n);case"HOST_SESSION":var a=t.payload;return v({},e,{},a);case"GET_SESSION":var r=t.payload;return v({},e,{},r);case"CLEAR_SESSION":return O;case"ADD_MESSAGE":var o=t.payload;return v({},e,{messages:e.messages.concat(o)});case"SET_TIMER":var i=t.payload;return v({},e,{timer:i});case"DECREMENT_TIMER":var l=t.payload;return e.timer<=0?(clearInterval(l),v({},e,{timer:null})):v({},e,{timer:e.timer-1});case"SET_TIMESLOTS":var c=t.payload;return v({},e,{timeslots:c});case"SET_VOTES":var s=t.payload;return v({},e,{votes:s});case"ADD_VOTE":var u=t.payload,d=u.timeslot,p=u.username,m=e.votes;return m[d]?m[d].push(p):m[d]=[p],v({},e,{votes:m});default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_EVENT":var n=t.payload;return e.concat(n);case"GET_EVENTS":var a=t.payload.events;return a;case"POST_EVENT":f.a.success("Event created",{className:"ui success message"});var r=t.payload;return e.concat(r);case"PUT_EVENT":f.a.success("Event updated",{className:"ui success message"});var o=t.payload;return e.filter((function(e){return e.id!==o.id})).concat(o);case"DELETE_EVENT":f.a.success("Event deleted",{className:"ui error message"});var i=t.payload.id;return e.filter((function(e){return e.id!==Number(i)}));case"GET_SESSION_EVENTS":var l=t.payload;return l.events;case"CLEAR_USER":return j;default:return e}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var n=t.payload,a=C({},e);return a[n]=!0,a;case h:return{};default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:if(!t.payload)return{connection:"ERR_CONNECTION_REFUSED"};var n=t.payload,a=n.data,r=n.data.errors;return T({},r?r:a);case p:return{};default:return e}}}),P=Object(c.e)(N,Object(c.d)(Object(c.a)(s.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),D=n(48),_=n(94),A=n(28),x=n(29),R=n(30),U=n(31),M=n(20),V=n(33),L=n(116),G=n(405),H=n(667),F=n(711),J=n(386),z=n(710),B=n(49),W=n(385),K="http://127.0.0.1:8080",X=n.n(W).a.create({baseURL:K});var Y=function(){return function(e){return X.defaults.headers.common.authorization=localStorage.getItem("jwt"),e({type:m,payload:"AUTH"}),X.get("/auth/authenticate").then((function(t){return e({type:"AUTH",payload:t.data})})).then(e({type:p})).catch((function(t){return e({type:d,payload:t.response})})).finally((function(){return e({type:h,payload:"AUTH"})}))}},q={background:"rgba(0,0,0,.05"};var Q=Object(l.b)((function(e){return{username:e.user.username}}),{signOut:function(){return function(e){localStorage.removeItem("jwt"),f.a.success("Signed out successfully",{className:"ui success message"}),e({type:"CLEAR_USER"}),e({type:"CLEAR_SESSION"}),e({type:"CLEAR_USER"}),e({type:h}),e({type:p})}}})((function(e){var t=localStorage.getItem("jwt"),n=Object(_.g)(),a=r.a.createElement(J.a.Menu,{position:"right"},r.a.createElement(z.a,{as:"p",content:e.username,color:"blue",className:"username",style:{margin:"auto 1rem"}}),r.a.createElement(D.b,{to:"/home",activeStyle:q},r.a.createElement(J.a.Item,null,r.a.createElement(B.a,{name:"home"}),"Home")),r.a.createElement(D.b,{to:"/schedule",activeStyle:q},r.a.createElement(J.a.Item,null,r.a.createElement(B.a,{name:"calendar"}),"Schedule")),r.a.createElement(J.a.Item,{onClick:function(){e.signOut(),n.push("/sign-in")}},r.a.createElement(B.a,{name:"sign out",size:"large",link:!0}),"Sign Out")),o=r.a.createElement(J.a.Menu,{position:"right"},r.a.createElement(D.b,{to:"/sign-up",activeStyle:q},r.a.createElement(J.a.Item,null,r.a.createElement(B.a,{name:"signup"}),"Sign Up")),r.a.createElement(D.b,{to:"/sign-in",activeStyle:q},r.a.createElement(J.a.Item,null,r.a.createElement(B.a,{name:"sign-in"}),"Sign In")));return r.a.createElement(J.a,{icon:"labeled",className:"navbar"},r.a.createElement("div",{style:{margin:"auto 1rem"}},r.a.createElement(D.b,{to:"/home"},r.a.createElement(z.a,{as:"h1",content:"Rendezvous",color:"blue"}))),null!==t?a:o)})),Z=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={token:localStorage.getItem("jwt"),redirect:r.a.createElement(r.a.Fragment,null)},n.handleNotFound=n.handleNotFound.bind(Object(M.a)(n)),n.handleNotLoggedIn=n.handleNotLoggedIn.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.unlisten=this.props.history.listen(this.props.clearErrors),!this.state.token&&this.props.protected&&this.setState({redirect:this.handleNotLoggedIn()})}},{key:"componentWillUpdate",value:function(e){var t=e.error;t&&this.setState({redirect:this.handleNotFound(t)})}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"handleNotFound",value:function(e){return f.a.error(e,{className:"ui error message"}),r.a.createElement(_.a,{to:{pathname:"/home"}})}},{key:"handleNotLoggedIn",value:function(){return f.a.error("You must be logged in",{className:"ui error message"}),r.a.createElement(_.a,{to:{pathname:"/sign-in"}})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.loader;return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(Q,null),r.a.createElement("div",{style:{height:"100%",marginLeft:"10%",marginRight:"10%"}},r.a.createElement(H.a,{inverted:!0,active:n},r.a.createElement(F.a,{inverted:!0,size:"huge",inline:"centered"})),r.a.createElement("br",null),t,this.state.redirect))}}]),t}(a.Component),$=Object(l.b)(null,{clearErrors:function(){return function(e){e({type:p})}}})(Object(_.h)(Z)),ee=n(34),te=n.n(ee),ne=n(40),ae=n(669),re=n(712);function oe(e){var t=e.data;return r.a.createElement(r.a.Fragment,null,Object.keys(t).length>0?r.a.createElement(re.a,{error:!0,header:"Error",list:Object.values(t).map((function(e){return r.a.createElement("li",{key:e},e)}))}):r.a.createElement(r.a.Fragment,null))}var ie=function(e){return function(t){return t({type:m,payload:"GET_SESSION_EVENTS"}),X.get("/session/".concat(e,"/events")).then((function(e){return t({type:"GET_SESSION_EVENTS",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"GET_SESSION_EVENTS"})}))}},le=function(e){var t=(e=e.split(" "))[0].split("-"),n=e[1],a=t[0],r=t[1],o=t[2];return new Date("".concat(o,"-").concat(r,"-").concat(a,"T").concat(n,":00"))},ce=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={code:""},n.handleChange=n.handleChange.bind(Object(M.a)(n)),n.handleJoin=n.handleJoin.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleJoin",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.joinSession({code:this.state.code});case 2:t=e.sent,(n=t.payload.id)&&this.props.history.push("/rooms/".concat(n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.code,t=this.props,n=t.loader,a=t.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{fluid:!0,name:"code",iconPosition:"left",icon:"hashtag",placeholder:"Enter code",type:"text",onChange:this.handleChange,value:e,error:Boolean(a.code)}),r.a.createElement("br",null),r.a.createElement(L.a,{onClick:this.handleJoin,fluid:!0,loading:n.JOIN_SESSION,color:"blue"},"Join"),r.a.createElement(oe,{data:a}))}}]),t}(r.a.Component);var se=Object(l.b)((function(e){return{loader:e.loader,errors:e.errors}}),{joinSession:function(e){return function(t){var n=function(e){var t={};return 0===e.code.length&&(t.code="Code cannot be empty"),{errors:t,validated:0===Object.values(t).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"JOIN_SESSION"}),X.post("/session/join",e).then((function(e){return t({type:"JOIN_SESSION",payload:e.data})})).then(t({type:p})).then(Object(f.a)("Room joined")).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"JOIN_SESSION"})}))):t({type:d,payload:{data:r}})}}})((function(e){var t=Object(_.g)();return r.a.createElement(ce,Object.assign({},e,{history:t}))})),ue=n(289),de=n(117);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={title:"",location:"",starttime:"",endtime:"",votingtime:"",duration:"",weekends:!1},n.handleChange=n.handleChange.bind(Object(M.a)(n)),n.handleHost=n.handleHost.bind(Object(M.a)(n)),n.handleTimeChange=n.handleTimeChange.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleTimeChange",value:function(e,t){var n=t.name,a=t.value;this.setState(Object(u.a)({},n,a))}},{key:"handleHost",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.hostSession(me({},this.state));case 2:t=e.sent,(n=t.payload.id)&&this.props.history.push("/rooms/".concat(n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.title,a=t.location,o=t.starttime,i=t.endtime,l=t.duration,c=t.votingtime,s=t.weekends,u=this.props,d=u.loader,p=u.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{name:"title",iconPosition:"left",icon:"calendar outline",placeholder:"Enter title",type:"text",fluid:!0,onChange:this.handleChange,value:n,error:Boolean(p.title)}),r.a.createElement("br",null),r.a.createElement(ae.a,{name:"location",iconPosition:"left",icon:"building",placeholder:"Enter location",type:"text",fluid:!0,onChange:this.handleChange,value:a,error:Boolean(p.location)}),r.a.createElement("br",null),r.a.createElement(de.DateTimeInput,{fluid:!0,closable:!0,autoComplete:"off",hideMobileKeyboard:!0,name:"starttime",iconPosition:"left",placeholder:"Enter start time",popupPosition:"bottom center",type:"text",onChange:this.handleTimeChange,value:o,error:Boolean(p.starttime)}),r.a.createElement("br",null),r.a.createElement(de.DateTimeInput,{fluid:!0,closable:!0,autoComplete:"off",hideMobileKeyboard:!0,name:"endtime",iconPosition:"left",placeholder:"Enter end time",popupPosition:"bottom center",type:"text",onChange:this.handleTimeChange,value:i,error:Boolean(p.endtime)}),r.a.createElement("br",null),r.a.createElement(ae.a,{name:"duration",iconPosition:"left",icon:"hourglass outline",placeholder:"Enter duration",type:"number",fluid:!0,onChange:this.handleChange,value:l,error:Boolean(p.duration)}),r.a.createElement("br",null),r.a.createElement(ae.a,{name:"votingtime",iconPosition:"left",icon:"hourglass outline",placeholder:"Enter voting time",type:"number",fluid:!0,onChange:this.handleChange,value:c,error:Boolean(p.votingtime)}),r.a.createElement("br",null),r.a.createElement(ue.a,{label:"Weekends",onChange:function(){return e.setState({weekends:!s})},checked:s}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(L.a,{onClick:this.handleHost,loading:d.HOST_SESSION,fluid:!0,color:"blue"},"Host"),r.a.createElement(oe,{data:p}))}}]),t}(r.a.Component);var fe=Object(l.b)((function(e){return{loader:e.loader,errors:e.errors}}),{hostSession:function(e){return function(t){e.starttime=le(e.starttime),e.endtime=le(e.endtime);var n=function(e){var t=e.title,n=e.location,a=e.starttime,r=e.endtime,o=e.votingtime,i=e.weekends,l={};return 0===t.length&&(l.title="Title cannot be empty"),0===n.length&&(l.location="Location cannot be empty"),0===a.length&&(l.starttime="Start time password cannot be empty"),0===r.length&&(l.endtime="End time cannot be empty"),0===o.length&&(l.votingtime="Voting time cannot be empty"),Date.parse(a)>Date.parse(r)&&(l.endtime="End cannot occur before start"),"boolean"!==typeof i&&(l.weekends="Weekends must be a boolean"),{errors:l,validated:0===Object.values(l).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"HOST_SESSION"}),X.post("/session/host",e).then((function(e){return t({type:"HOST_SESSION",payload:e.data})})).then(t({type:p})).then(Object(f.a)("Room created")).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"HOST_SESSION"})}))):t({type:d,payload:{data:r}})}}})((function(e){var t=Object(_.g)();return r.a.createElement(he,Object.assign({},e,{history:t}))})),Ee=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={join:!1,host:!1},n.handleChange=n.handleChange.bind(Object(M.a)(n)),n.handleReset=n.handleReset.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.user.id||this.props.authenticate()}},{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleReset",value:function(){this.setState({join:!1,host:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.join,a=t.host,o=this.props.loader,i=r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a.Group,{size:"massive",fluid:!0,color:"blue"},r.a.createElement(L.a,{onClick:function(){return e.setState({host:!0})}},"Host"),r.a.createElement(L.a.Or,{text:"OR"}),r.a.createElement(L.a,{onClick:function(){return e.setState({join:!0})}},"Join"))),l=n||a?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(L.a,{fluid:!0,onClick:this.handleReset},"Back")):null,c=i;return n&&(c=r.a.createElement(se,null)),a&&(c=r.a.createElement(fe,null)),r.a.createElement($,{protected:!0,loader:o.AUTH},r.a.createElement(G.a,{centered:!0,verticalAlign:"middle",columns:2,relaxed:"very",stackable:!0,style:{height:"75%"}},r.a.createElement(G.a.Column,null,c,l)))}}]),t}(r.a.Component),be=Object(l.b)((function(e){return{user:e.user,loader:e.loader}}),{authenticate:Y})(Ee),ye=n(284),ge=n(715),ve=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={username:"",password:"",password2:""},n.handleChange=n.handleChange.bind(Object(M.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,a,r,o;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.username,a=t.password,r=t.password2,e.next=3,this.props.signUp({username:n,password:a,password2:r});case 3:o=e.sent,o.payload.username&&this.props.history.push("/sign-in");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.password2,o=this.props,i=o.loader,l=o.errors;return r.a.createElement($,null,r.a.createElement(G.a,{centered:!0,verticalAlign:"middle",columns:2,relaxed:"very",stackable:!0,style:{marginTop:"7%"}},r.a.createElement(G.a.Column,null,r.a.createElement(z.a,{as:"h1",textAlign:"center"},"Register an Account"),r.a.createElement(ye.a,{textAlign:"center"},r.a.createElement(ge.a,null,r.a.createElement(ge.a.Input,{name:"username",icon:"user",fluid:!0,iconPosition:"left",placeholder:"Username",onChange:this.handleChange,value:t,error:Boolean(l.username)}),r.a.createElement(ge.a.Input,{name:"password",icon:"lock",fluid:!0,iconPosition:"left",placeholder:"Password",type:"password",onChange:this.handleChange,value:n,error:Boolean(l.password)}),r.a.createElement(ge.a.Input,{name:"password2",icon:"lock",fluid:!0,iconPosition:"left",placeholder:"Repeat Password",type:"password",onChange:this.handleChange,value:a}),r.a.createElement(L.a,{primary:!0,fluid:!0,loading:i.SIGN_UP,onClick:this.handleSubmit},"Sign Up")),r.a.createElement(oe,{data:l})),r.a.createElement(re.a,{warning:!0},r.a.createElement(B.a,{name:"help"}),"Already registered?\xa0",r.a.createElement("a",{href:"/sign-in"},"Login here"),"\xa0"))))}}]),t}(r.a.Component);var Oe=Object(l.b)((function(e){return{loader:e.loader,errors:e.errors}}),{signUp:function(e){return function(t){var n=function(e){var t=e.username,n=e.password,a=e.password2,r={};return 0===t.length&&(r.username="Username cannot be empty"),0===n.length&&(r.password="Password cannot be empty"),0===a.length&&(r.password2="Repeated password cannot be empty"),{errors:r,validated:0===Object.values(r).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"SIGN_UP"}),X.post("/auth/register",e).then((function(e){return t({type:"SIGN_UP",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"SIGN_UP"})}))):t({type:d,payload:{data:r}})}}})((function(e){var t=Object(_.g)();return r.a.createElement(ve,Object.assign({},e,{history:t}))})),je=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={username:"",password:""},n.handleChange=n.handleChange.bind(Object(M.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.username,a=t.password,e.next=3,this.props.signIn({username:n,password:a});case 3:if(r=e.sent,!r.payload.token){e.next=7;break}return e.abrupt("return",this.props.history.push("/home"));case 7:return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=this.props,o=a.loader,i=a.errors;return r.a.createElement($,null,r.a.createElement(G.a,{centered:!0,verticalAlign:"middle",columns:2,relaxed:"very",stackable:!0,style:{marginTop:"7%"}},r.a.createElement(G.a.Column,null,r.a.createElement(z.a,{as:"h1",textAlign:"center"},"Login to Account"),r.a.createElement(ye.a,{textAlign:"center"},r.a.createElement(ge.a,null,r.a.createElement(ge.a.Input,{name:"username",icon:"user",fluid:!0,iconPosition:"left",placeholder:"Username",type:"text",onChange:this.handleChange,value:t,error:Boolean(i.username)}),r.a.createElement(ge.a.Input,{name:"password",icon:"lock",fluid:!0,iconPosition:"left",placeholder:"Password",type:"password",onChange:this.handleChange,value:n,error:Boolean(i.password)}),r.a.createElement(L.a,{primary:!0,fluid:!0,onClick:this.handleSubmit,loading:o.SIGN_IN},"Sign In")),r.a.createElement(oe,{data:i})),r.a.createElement(re.a,{warning:!0},r.a.createElement(B.a,{name:"help"}),"Not yet signed up?\xa0",r.a.createElement("a",{href:"/sign-up"},"Register here"),"\xa0"))))}}]),t}(r.a.Component);var Se=Object(l.b)((function(e){return{user:e.user,loader:e.loader,errors:e.errors}}),{signIn:function(e){return function(t){var n=function(e){var t=e.username,n=e.password,a={};return 0===t.length&&(a.username="Username cannot be empty"),0===n.length&&(a.password="Password cannot be empty"),{errors:a,validated:0===Object.values(a).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"SIGN_IN"}),X.post("/auth/login",e).then((function(e){return t({type:"SIGN_IN",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"SIGN_IN"})}))):t({type:d,payload:{data:r}})}}})((function(e){var t=Object(_.g)();return r.a.createElement(je,Object.assign({},e,{history:t}))}));var Ce=function(){var e=Object(_.g)();return localStorage.getItem("jwt")&&e.push("/home"),e.push("/sign-in"),r.a.createElement($,null,r.a.createElement(z.a,{as:"h1",textAlign:"center"},"Welcome to Rendezvous"))},we=n(720),ke=n(230),Te=n(93),Ie=n(231),Ne=n(232);var Pe=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={title:"",location:"",endtime:""},n.handleChange=n.handleChange.bind(Object(M.a)(n)),n.handleSave=n.handleSave.bind(Object(M.a)(n)),n.handleTimeChange=n.handleTimeChange.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleTimeChange",value:function(e,t){var n=t.name,a=t.value;this.setState(Object(u.a)({},n,a))}},{key:"handleSave",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date(this.props.date),n=this.state.endtime?new Date("".concat(new Date(this.props.date).toDateString()," ").concat(this.state.endtime)):"",a={title:this.state.title,location:this.state.location,starttime:t,endtime:n},e.next=5,this.props.postEvent(a);case 5:r=e.sent,r.payload.id&&this.props.closeModal();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.title,n=e.location,a=e.endtime,o=this.props,i=o.date,l=o.loader;return r.a.createElement(ge.a,null,r.a.createElement(z.a,{block:!0,textAlign:"center"},"Create Event on ",new Date(i).toUTCString()),r.a.createElement(ge.a.Input,{fluid:!0,name:"title",iconPosition:"left",icon:"calendar outline",placeholder:"Enter title",type:"text",onChange:this.handleChange,value:t}),r.a.createElement("br",null),r.a.createElement(ge.a.Input,{fluid:!0,name:"location",iconPosition:"left",icon:"building outline",placeholder:"Enter location",type:"text",onChange:this.handleChange,value:n}),r.a.createElement("br",null),r.a.createElement(de.TimeInput,{fluid:!0,closable:!0,autoComplete:"off",hideMobileKeyboard:!0,name:"endtime",iconPosition:"left",placeholder:"Enter end time",type:"text",onChange:this.handleTimeChange,value:a}),r.a.createElement("br",null),r.a.createElement(L.a,{onClick:this.handleSave,fluid:!0,loading:l.POST_EVENT},"Save"))}}]),t}(r.a.Component),De=Object(l.b)((function(e){return{loader:e.loader}}),{postEvent:function(e){return function(t){var n=function(e){var t=e.title,n=e.location,a=e.starttime,r=e.endtime,o={};return 0===t.length&&(o.title="Title cannot be empty"),0===n.length&&(o.location="Location cannot be empty"),0===a.length&&(o.starttime="Start time cannot be empty"),0===r.length&&(o.endtime="End time cannot be empty"),Date.parse(a)>Date.parse(r)&&(o.endtime="End cannot occur before start"),{errors:o,validated:0===Object.values(o).length}}(e),a=n.validated,r=n.errors;return a?(t({type:m,payload:"POST_EVENT"}),X.post("/events/",e).then((function(e){return t({type:"POST_EVENT",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"POST_EVENT"})}))):t({type:d,payload:{data:r}})}}})(Pe);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={title:"",location:"",endtime:""},n.handleChange=n.handleChange.bind(Object(M.a)(n)),n.handleTimeChange=n.handleTimeChange.bind(Object(M.a)(n)),n.handleUpdate=n.handleUpdate.bind(Object(M.a)(n)),n.handleDelete=n.handleDelete.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleTimeChange",value:function(e,t){var n=t.name,a=t.value;this.setState(Object(u.a)({},n,a))}},{key:"handleUpdate",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.endtime?new Date("".concat(this.props.event.end.toDateString()," ").concat(this.state.endtime)):"",n=Ae({},this.state,{starttime:this.props.event.start,endtime:t}),e.next=4,this.props.updateEvent(n,this.props.event.id);case 4:a=e.sent,r=a.payload,r.id&&this.props.closeModal();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.deleteEvent(this.props.event.id);case 2:t=e.sent,t.payload.id&&this.props.closeModal();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.title,n=e.location,a=e.endtime,o=this.props,i=o.event,l=o.loader;return r.a.createElement(ge.a,null,r.a.createElement(z.a,{textAlign:"center"},"Update Event"),r.a.createElement(ge.a.Input,{fluid:!0,name:"title",iconPosition:"left",icon:"calendar outline",placeholder:i.title,type:"text",onChange:this.handleChange,value:t}),r.a.createElement(ge.a.Input,{fluid:!0,name:"location",iconPosition:"left",icon:"building outline",placeholder:i.extendedProps.location,type:"text",onChange:this.handleChange,value:n}),r.a.createElement(de.TimeInput,{fluid:!0,closable:!0,autoComplete:"off",hideMobileKeyboard:!0,name:"endtime",iconPosition:"left",placeholder:i.end.toUTCString(),type:"text",onChange:this.handleTimeChange,value:a}),r.a.createElement(L.a,{primary:!0,onClick:this.handleUpdate,fluid:!0,loading:l.PUT_EVENT},"Save"),r.a.createElement("br",null),r.a.createElement(L.a,{onClick:this.handleDelete,fluid:!0,color:"red",loading:l.DELETE_EVENT},"Delete"))}}]),t}(r.a.Component),Re=Object(l.b)((function(e){return{loader:e.loader}}),{updateEvent:function(e,t){return function(n){var a=function(e){var t=e.title,n=e.location,a=e.starttime,r=e.endtime,o={};return t||n||r||(o.title="You have to update atleast one property"),Date.parse(a)>Date.parse(r)&&(o.endtime="End cannot occur before start"),{errors:o,validated:0===Object.values(o).length}}(e),r=a.validated,o=a.errors;return r?(n({type:m,payload:"PUT_EVENT"}),X.put("/events/".concat(t),e).then((function(e){return n({type:"PUT_EVENT",payload:e.data})})).then(n({type:p})).catch((function(e){return n({type:d,payload:e.response})})).finally((function(){return n({type:h,payload:"PUT_EVENT"})}))):n({type:d,payload:{data:o}})}},deleteEvent:function(e){return function(t){return t({type:m,payload:"DELETE_EVENT"}),X.delete("/events/".concat(e)).then((function(e){return t({type:"DELETE_EVENT",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"DELETE_EVENT"})}))}}})(xe);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Me=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={modalNew:!1,modalEdit:!1,selectedDate:null,selectedEvent:null},n.handleDateClick=n.handleDateClick.bind(Object(M.a)(n)),n.handleEventClick=n.handleEventClick.bind(Object(M.a)(n)),n.handleCloseModal=n.handleCloseModal.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.events.length||this.props.getEvents()}},{key:"handleDateClick",value:function(e){this.setState({modalNew:!0,selectedDate:e.dateStr})}},{key:"handleEventClick",value:function(e){this.setState({modalEdit:!0,selectedEvent:e.event})}},{key:"handleCloseModal",value:function(){this.setState({modalNew:!1,modalEdit:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.modalNew,a=t.modalEdit,o=t.selectedDate,i=t.selectedEvent,l=this.props.errors,c=this.props.events.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{start:e.starttime,end:e.endtime})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{defaultView:"timeGridWeek",height:"auto",events:c,plugins:[Te.d,Ne.a,Ie.a],dateClick:this.handleDateClick,eventClick:this.handleEventClick}),r.a.createElement(we.a,{open:n,onClose:function(){return e.setState({modalNew:!1})},size:"small"},r.a.createElement(we.a.Content,null,r.a.createElement(De,{date:o,closeModal:this.handleCloseModal}),r.a.createElement(oe,{data:l}))),r.a.createElement(we.a,{open:a,onClose:function(){return e.setState({modalEdit:!1})},size:"small"},r.a.createElement(we.a.Content,null,r.a.createElement(Re,{event:i,closeModal:this.handleCloseModal}),r.a.createElement(oe,{data:l}))))}}]),t}(a.Component),Ve=Object(l.b)((function(e){return{events:e.events,errors:e.errors}}),{getEvents:function(){return function(e){return e({type:m,payload:"GET_EVENTS"}),X.get("/events/").then((function(t){return e({type:"GET_EVENTS",payload:t.data})})).then(e({type:p})).catch((function(t){return e({type:d,payload:t.response})})).finally((function(){return e({type:h,payload:"GET_EVENTS"})}))}}})(Me),Le=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={},n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.user.id||this.props.authenticate()}},{key:"render",value:function(){var e=this.props.loader;return r.a.createElement($,{protected:!0,loader:e.GET_EVENTS},r.a.createElement(Ve,null))}}]),t}(a.Component),Ge=Object(l.b)((function(e){return{user:e.user,loader:e.loader}}),{authenticate:Y})(Le),He=n(413),Fe=n.n(He),Je=n(91),ze=function(e,t){return function(n){e.emit("close",t),n({type:"CLEAR_SESSION"})}},Be=n(717),We=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={message:""},n.handleChange=n.handleChange.bind(Object(M.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){this.props.ioMsg(this.props.socket,this.state.message),this.setState({message:""})}},{key:"render",value:function(){var e=this.state.message,t=this.props.messages;return r.a.createElement(Be.a.Group,null,r.a.createElement(z.a,{as:"h3",textAlign:"center",dividing:!0},"Chat"),t.map((function(e,t){return r.a.createElement(Be.a,{key:t},r.a.createElement(Be.a.Avatar,{src:"https://react.semantic-ui.com/images/avatar/small/matt.jpg"}),r.a.createElement(Be.a.Content,null,r.a.createElement(Be.a.Author,{as:"span"},e.username),r.a.createElement(Be.a.Metadata,null,e.time),r.a.createElement(Be.a.Text,null,e.message)))})),r.a.createElement(ge.a,{reply:!0},r.a.createElement(ge.a.Input,{name:"message",icon:"envelope",iconPosition:"left",placeholder:"Enter message",type:"text",fluid:!0,onChange:this.handleChange,value:e}),r.a.createElement(L.a,{primary:!0,onClick:this.handleSubmit,fluid:!0},"Send")))}}]),t}(a.Component),Ke=Object(l.b)((function(e){return{messages:e.session.messages}}),{ioMsg:function(e,t){return function(n){t&&e.emit("message",t)}}})(We);var Xe=Object(l.b)((function(e){return{session:e.session,loader:e.loader}}),{ioStart:function(e,t){return function(n){n({type:m,payload:"START_SESSION"}),e.emit("start",t)}},ioClose:ze,closeSession:function(e){return function(t){return t({type:m,payload:"CLEAR_SESSION"}),X.delete("/session/".concat(e)).then((function(e){return t({type:"CLEAR_SESSION",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"CLEAR_SESSION"})}))}}})((function(e){var t=Object(_.g)();function n(){return(n=Object(ne.a)(te.a.mark((function t(){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.ioStart(e.socket,e.session.id);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(ne.a)(te.a.mark((function n(){var a;return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.closeSession(e.session.id);case 2:a=n.sent,a.payload.id&&(e.ioClose(e.socket,e.session.id),t.push("/home"));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{info:!0},r.a.createElement(re.a.Header,null,"Code"),r.a.createElement(re.a.Content,null,"Room code is ",r.a.createElement("b",null,e.session.code))),r.a.createElement(L.a,{onClick:function(){return n.apply(this,arguments)},fluid:!0,loading:e.loader.START_SESSION},"Start"),r.a.createElement("br",null),r.a.createElement(L.a,{onClick:function(){return a.apply(this,arguments)},fluid:!0,loading:e.loader.CLEAR_SESSION},"Close"))}));function Ye(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{onClick:function(){},fluid:!0},"Leave"))}var qe=n(716),Qe=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={},n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props.session,t=e.title,n=e.location,a=e.hostId,o=e.starttime,i=e.endtime,l=e.duration,c=e.votingtime,s=e.participants,u=e.weekends;return r.a.createElement(qe.a,{divided:!0,relaxed:!0},r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"bars",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,t),r.a.createElement(qe.a.Description,null,"Title"))),r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"building",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,n),r.a.createElement(qe.a.Description,null,"Location"))),r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"user secret",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,a),r.a.createElement(qe.a.Description,null,"Host"))),r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"hourglass start",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,new Date(o).toUTCString()),r.a.createElement(qe.a.Description,null,"Start"))),r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"hourglass end",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,new Date(i).toUTCString()),r.a.createElement(qe.a.Description,null,"End"))),r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"hourglass end",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,l),r.a.createElement(qe.a.Description,null,"Duration"))),r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"time",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,c),r.a.createElement(qe.a.Description,null,"Time to vote"))),r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"user",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,"undefined"!==typeof s?s.length:""),r.a.createElement(qe.a.Description,null,"Participants"))),r.a.createElement(qe.a.Item,null,r.a.createElement(qe.a.Icon,{name:"flag",size:"large",verticalAlign:"middle"}),r.a.createElement(qe.a.Content,null,r.a.createElement(qe.a.Header,null,String(u)),r.a.createElement(qe.a.Description,null,"Incude weekends"))))}}]),t}(a.Component),Ze=n(288);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var et=["#B03060","#FE9A76","#FFD700","#32CD32","#016936","#008080","#0E6EB8","#EE82EE","#B413EC","#FF1493","#A52A2A","#A0A0A0"],tt=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(R.a)(this,Object(U.a)(t).call(this,e))).state={},n.handleEventClick=n.handleEventClick.bind(Object(M.a)(n)),n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"handleEventClick",value:function(e){var t=e.event;if(t.extendedProps.timeslot)return this.props.ioVote(this.props.socket,t.extendedProps.timeslot);f.a.warn("Event from ".concat(t.extendedProps.username," schedule"))}},{key:"componentDidMount",value:function(){var e=Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getSessionEvents(this.props.room);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.props,n=t.events,a=t.session,o=a.timeslots,i=a.duration,l=a.timer,c=a.votes;o=o.map((function(e){var t=new Date(e),n=new Date(e);return n.setMinutes(n.getMinutes()+i),{title:"Votes ".concat(c[e]?c[e].length:0),start:t,end:n,timeslot:e}}));var s=Object(Ze.a)(new Set(n.map((function(e){return e.userid})))).reduce((function(e,t,n){return e.set(t,et[n])}),new Map);return n=n.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{start:e.starttime,end:e.endtime,backgroundColor:s.get(e.userid),borderColor:s.get(e.userid)})})),l&&(e=n).push.apply(e,Object(Ze.a)(o)),r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{defaultView:"timeGridWeek",events:n,header:!1,height:"auto",eventClick:this.handleEventClick,plugins:[Te.d,Ne.a,Ie.a]}))}}]),t}(a.Component),nt=Object(l.b)((function(e){return{session:e.session,events:e.events}}),{getSessionEvents:ie,ioVote:function(e,t){return function(n){e.emit("vote",t)}}})(tt),at=function(e){function t(e){var n;Object(A.a)(this,t),n=Object(R.a)(this,Object(U.a)(t).call(this,e));var a=Fe()(K);return a.on("message",(function(e){return n.props.ioOnMsg(e)})),a.on("join",(function(e){return n.props.ioOnJoin(e)})),a.on("leave",(function(e){return n.props.ioOnLeave(e)})),a.on("start",(function(e){return n.props.ioOnStart(e)})),a.on("vote",(function(e){return n.props.ioOnVote(e)})),a.on("error",(function(e){return n.props.ioOnError(e)})),a.on("close",(function(){return n.props.ioOnClose(e)})),a.on("enter",(function(){return n.props.ioOnEnter(e)})),n.state={socket:a,panel:r.a.createElement(r.a.Fragment,null)},n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,a,o,i,l,c,s,u,d;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.socket,this.props.user.id){e.next=4;break}return e.next=4,this.props.authenticate();case 4:if(t.emit("join",this.props.match.params.id,this.props.user.username),this.props.session.id){e.next=17;break}return e.next=8,this.props.getSession(this.props.match.params.id);case 8:if(n=e.sent,a=n.payload,o=a.votingend,i=a.votes,l=a.timeslots,c=a.status,o&&this.props.ioOnStart({votingend:o,timeslots:l,votes:i}),400!==c&&404!==c){e.next=17;break}return e.abrupt("return");case 17:s=this.props,u=s.user,d=s.session,this.setState({panel:u.id===d.hostId?r.a.createElement(Xe,{socket:t}):r.a.createElement(Ye,{socket:t})});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({socket:null,panel:null})}},{key:"render",value:function(){var e=this.state,t=e.socket,n=e.panel,a=this.props,o=a.session,i=a.errors,l=a.loader,c=a.match;return r.a.createElement($,{protected:!0,error:i.id,loader:l.AUTH||l.GET_SESSION},r.a.createElement(G.a,{columns:2,stackable:!0},r.a.createElement(G.a.Column,{width:6},r.a.createElement(Qe,{session:o}),n,r.a.createElement(Ke,{room:c.params.id,socket:t})),r.a.createElement(Je.a,{width:10},r.a.createElement(nt,{socket:t,room:c.params.id}),o.timer)))}}]),t}(a.Component);var rt=Object(l.b)((function(e){return{user:e.user,session:e.session,loader:e.loader,errors:e.errors}}),{authenticate:Y,getSession:function(e){return function(t){return t({type:m,payload:"GET_SESSION"}),X.get("/session/".concat(e)).then((function(e){return t({type:"GET_SESSION",payload:e.data})})).then(t({type:p})).catch((function(e){return t({type:d,payload:e.response})})).finally((function(){return t({type:h,payload:"GET_SESSION"})}))}},getSessionEvents:ie,ioOnMsg:function(e){return function(t){t({type:"ADD_MESSAGE",payload:JSON.parse(e)})}},ioOnJoin:function(e,t){return function(t){Object(f.a)("".concat(e," has joined the room"))}},ioOnLeave:function(e){return function(t){e&&Object(f.a)("".concat(e," has left the room"))}},ioClose:ze,ioOnStart:function(e){return function(t){var n=e,a=n.votingend,r=n.timeslots,o=n.votes;a?(a=new Date(a)).setHours(a.getHours()-1):(e=JSON.parse(e),a=new Date(e.votingend),r=e.timeslots,o=e.votes),t({type:"SET_TIMESLOTS",payload:r}),t({type:"SET_VOTES",payload:o}),t({type:h});var i=new Date;if(!(a<i)){var l=Math.ceil(Math.abs((i.getTime()-a.getTime())/1e3));Object(f.a)("Voting has started, you have ".concat(l," seconds to vote")),t({type:"SET_TIMER",payload:l});var c=setInterval((function(){return t({type:"DECREMENT_TIMER",payload:c})}),1e3)}}},ioOnVote:function(e){return function(t){var n=JSON.parse(e);t({type:"ADD_VOTE",payload:{timeslot:n.timeslot,username:n.username}})}},ioOnError:function(e){return function(t){f.a.error(e,{className:"ui error message"}),t({type:d,payload:{data:{socket:e}}})}},ioOnClose:function(e){return function(t){f.a.error("Room was closed by the host",{className:"ui error message"}),e.history.push("/home")}},ioOnEnter:function(e){return function(t){Object(f.a)("New participant has joined"),e.getSession(e.match.params.id),e.getSessionEvents(e.match.params.id)}}})((function(e){var t=Object(_.g)();return r.a.createElement(at,Object.assign({history:t},e))}));n(664),n(665);var ot=document.getElementById("root");i.a.render(r.a.createElement(l.a,{store:P},r.a.createElement((function(){return X.defaults.headers.common.authorization=localStorage.getItem("jwt"),f.a.configure({position:"bottom-center",toastClassName:"ui info message",hideProgressBar:!0,draggable:!1,newestOnTop:!0,autoClose:5e3}),r.a.createElement(D.a,null,r.a.createElement(_.d,null,r.a.createElement(_.b,{path:"/rooms/:id",component:rt}),r.a.createElement(_.b,{path:"/schedule",component:Ge}),r.a.createElement(_.b,{path:"/sign-up",component:Oe}),r.a.createElement(_.b,{path:"/sign-in",component:Se}),r.a.createElement(_.b,{path:"/home",component:be}),r.a.createElement(_.b,{path:"/",component:Ce})))}),null)),ot)}},[[427,1,2]]]);
//# sourceMappingURL=main.3b34863d.chunk.js.map